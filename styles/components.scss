@tailwind components;

@layer components {
  .emoji {
    display: inline-block;
    height: 0.8em;
    margin-bottom: 0;
    margin-left: 0.1em;
    margin-right: 0.1em;
    margin-top: 0;
    vertical-align: -0.1em;
    width: 0.8em;
  }

  .skip-nav {
    @apply tw-absolute tw-px-4 tw-py-3 tw-duration-200 tw-transform tw--translate-y-12 tw--left-1/4 focus:tw-top-4 focus:tw-translate-y-3 tw--top-8;
  }

  #skip {
    scroll-margin-top: 1.125rem;
  }

  /* https://seek-oss.github.io/capsize/ */
  .capsize::before {
    content: '';
    display: table;
    margin-bottom: -0.098em;
  }

  .capsize::after {
    content: '';
    display: table;
    margin-top: -0.219em;
  }

  .highlight-line {
    @apply tw-block tw-px-4 tw--mx-4 tw-border-l-4 tw-border-blue-500;
  }

  .metric-card {
    > a {
      @apply tw-no-underline;
    }
    > p {
      @apply tw-my-2;
    }
  }

  .step > h3 {
    @apply tw-my-0;
  }

  @keyframes shrink {
    0%,
    100% {
      height: 0.75rem;
    }
    50% {
      height: 0.375rem;
    }
  }

  @keyframes expand {
    0%,
    100% {
      height: 0.375rem;
    }
    50% {
      height: 0.75rem;
    }
  }

  @keyframes cutebounce {
    0%,
    100% {
      animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
      transform: rotate(20deg) translateY(-25%);
    }
    25%,
    75% {
      animation-timing-function: cubic-bezier(0, 0, 0.2, 1);
      transform: none;
    }
    50% {
      animation-timing-function: cubic-bezier(0.8, 0, 1, 1);
      transform: rotate(-20deg) translateY(-25%);
    }
  }

  .animate-cutebounce {
    animation: cutebounce 0.8s infinite;
  }

  .tw-prose {
    .tweet a {
      font-weight: inherit;
      text-decoration: inherit;
    }

    a {
      @apply tw-no-underline tw-text-primary hover:tw-text-black dark:hover:tw-text-white;
    }

    a.anchor {
      margin-left: 0.2em;
      span.icon.icon-link {
        font-size: 1em;

        &::after {
          content: '+';

          @apply tw-font-black;
        }
      }
    }

    img {
      /* Don't apply styles to next/image */
      @apply tw-m-0;
    }

    p {
      @apply tw-font-normal tw-text-base tw-mb-8;

      line-height: 1.625rem;
    }

    pre {
      @apply tw-p-0;
    }

    pre code {
      @apply tw-p-3;
    }

    code {
      @apply tw-text-sm;
    }

    .task-list-item {
      @apply tw-pl-0;

      &::before {
        display: none;
      }

      &:first-child,
      &:last-child {
        @apply tw-my-0;
      }

      input {
        @apply tw-mr-2;
      }
    }

    .footnote-back {
      @apply tw-ml-1;
      & > span {
        @apply tw-w-full tw-h-full;
        & > * {
          @apply tw-w-[1em] tw-h-[1em];
        }
      }
    }

    .footnote-ref {
      margin: 0 !important;
      @apply tw-no-underline hover:tw-text-primary-600 dark:hover:tw-text-primary-600;
      > sup {
        @apply tw-ml-0.5 tw-text-primary dark:tw-text-primary;

        font-family: Inter, sans-serif;
        font-size: 0.6rem;

        &::before {
          content: '[';
        }

        &::after {
          content: ']';
        }
      }
    }

    > :first-child {
      margin-bottom: 1.25em !important;

      /* Override removing margin, to prevent layout shift */
      margin-top: 1.25em !important;
    }
  }

  .page-title {
    @apply tw-font-bold tw-text-5xl tw-tracking-tight tw-text-black dark:tw-text-white;
  }
}
